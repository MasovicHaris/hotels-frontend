(this["webpackJsonphotels-frontend"]=this["webpackJsonphotels-frontend"]||[]).push([[0],{159:function(e,n,t){e.exports=t(189)},189:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),c=t.n(o),i=t(62),u=t(26),s=t(15),l=t(24),m=t(141),d=t(238),g=t(236),f=t(241),p=t(239),b="snackbarHandleShowMessage",h="snackbarHandleCloseMessage",v="snackbarHandleExited",j="error",O="success",E=function(e,n){return{type:b,message:e,severity:n}};function y(e){return a.a.createElement(p.a,Object.assign({elevation:6,variant:"filled"},e))}var w=function(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.snackbar.messageShown})),t=Object(u.c)((function(e){return e.snackbar.message})),r=function(){e({type:h})};return a.a.createElement(f.a,{key:t?t.key:void 0,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,autoHideDuration:5e3,onClose:r,onExited:function(){e({type:v})}},a.a.createElement(y,{onClose:r,severity:t.severity},t.message))},x=t(106);function k(e){var n=e.component,t=e.routes,r=e.userLoggedIn,o=Object(x.a)(e,["component","routes","userLoggedIn"]);return r?a.a.createElement(s.b,Object.assign({},o,{render:function(e){return a.a.createElement(n,Object.assign({},e,{routes:t}))}})):a.a.createElement(s.a,{to:"/login"})}k.defaultProps={component:function(){},routes:[]};var S=k,I=t(32),P=t(232),C=t(103),q=t(233),L=t(237),T=t(235),B=t(234),z=t(231),W=t(44),Q=t(142);var D=function(){var e=new Q.a;return{setCookie:function(n,t){e.set(n,t,{path:"/"})},getCookie:function(n){return e.get(n,{path:"/"})},removeCookie:function(n){e.remove(n)}}}(),N="authLogin",A="authLoginInProgress",F="authLoginSuccess",H="authSignup",M="authSignupInProgress",V="authLogout",R=function(e){return{type:A,status:e}},J=function(e){return{type:F,data:e}},U=function(e){return{type:M,status:e}},G=t(230),K=t(229);function X(){var e=Object(I.a)(["\n  margin: 0px auto;\n  min-height: 15px;\n"]);return X=function(){return e},e}function Y(){var e=Object(I.a)(["\n  display: flex;\n"]);return Y=function(){return e},e}var Z=l.c.div(Y()),$=Object(l.c)(K.a)(X());var _=function(e){return a.a.createElement(Z,null,a.a.createElement($,e))};function ee(){var e=Object(I.a)(["\n  color: ",";\n"]);return ee=function(){return e},e}function ne(){var e=Object(I.a)(["\n  opacity: ",";\n  padding: ",";\n  margin-right: ",";\n  background-color: ",";\n\n  &:hover {\n    background-color: ",";\n    opacity: 0.7;\n  }\n"]);return ne=function(){return e},e}var te=Object(l.c)(G.a)(ne(),(function(e){return e.opacity}),(function(e){return e.padding}),(function(e){return e.mright}),(function(e){return e.theme.buttonColor}),(function(e){return e.theme.buttonColor})),re=Object(l.c)(_)(ee(),(function(e){return e.theme.primaryColor}));function ae(e){var n=e.children,t=e.spinnerSize,r=e.loadingInProgress,o=Object(x.a)(e,["children","spinnerSize","loadingInProgress"]);return a.a.createElement(te,o,r?a.a.createElement(re,{size:"".concat(t,"px")}):n)}ae.defaultProps={type:"",disabled:!1,loadingInProgress:!1,onClick:function(){},spinnerSize:20};var oe=ae;function ce(){var e=Object(I.a)(["\n  background-color: #fff;\n"]);return ce=function(){return e},e}var ie=Object(l.c)(z.a)(ce()),ue=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var se=function(){var e=ue(),n=Object(u.b)(),t=Object(s.g)(),o=Object(u.c)((function(e){return e.auth.userLoggedIn})),c=Object(u.c)((function(e){return e.auth.signupInProgress})),i=W.a().shape({name:W.b().required("First name is required."),surname:W.b().required("Last name is reqduired."),email:W.b().required("Email is required.").min(5,"Email should have at least 5 characters."),password:W.b().required("Password is required.")}),l=Object(C.a)({initialValues:{name:"",surname:"",email:"",password:""},validationSchema:i,onSubmit:function(e){n(function(e,n){return{type:H,data:e,history:n}}(e,t))}}),m=l.values,d=l.errors,g=l.touched,f=l.handleChange,p=l.handleBlur,b=l.handleSubmit;if(o)return a.a.createElement(s.a,{to:"/"});var h=[{value:m.name,label:"First name",error:g.name&&d.name,name:"name",grid:!0},{value:m.surname,label:"Last name",error:g.surname&&d.surname,name:"surname",grid:!0},{value:m.email,label:"Email",error:g.email&&d.email,name:"email"},{value:m.password,label:"Password",error:g.password&&d.password,name:"password",password:!0}];return a.a.createElement(r.Fragment,null,a.a.createElement(ie,{component:"main",maxWidth:"xs"},a.a.createElement(q.a,null),a.a.createElement("div",{className:e.paper},a.a.createElement("form",{className:e.form,onSubmit:b,noValidate:!0},a.a.createElement("h1",null,"e4u hotels - Signup"),a.a.createElement(B.a,{container:!0,spacing:2},h.map((function(e){return a.a.createElement(B.a,{key:e.name,item:!0,xs:12,sm:e.grid?6:null},a.a.createElement(L.a,{value:e.value,onChange:f,onBlur:p,label:e.label,error:Boolean(e.error),helperText:e.error,variant:"outlined",name:e.name,fullWidth:!0,type:e.password?"password":"text"}))}))),a.a.createElement(oe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",loadingInProgress:c,className:e.submit},"Sign up"),a.a.createElement(B.a,{container:!0,justify:"flex-end"},a.a.createElement(B.a,{item:!0},a.a.createElement(T.a,{href:"/login",variant:"body2"},"Already have an account?")))))))};function le(){var e=Object(I.a)(["\n  background-color: #fff;\n"]);return le=function(){return e},e}var me=Object(l.c)(z.a)(le()),de=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var ge=function(){var e=Object(u.b)(),n=de(),t=Object(s.g)(),o=Object(u.c)((function(e){return e.auth.userLoggedIn})),c=Object(u.c)((function(e){return e.auth.loginInProgress})),i=W.a().shape({email:W.b().required("Email is required."),password:W.b().required("Password is required.")}),l=Object(C.a)({initialValues:{email:"",password:""},validationSchema:i,onSubmit:function(n){var r=n.email,a=n.password;e(function(e,n,t){return{type:N,email:e,password:n,history:t}}(r,a,t))}}),m=l.values,d=l.errors,g=l.touched,f=l.handleChange,p=l.handleBlur,b=l.handleSubmit,h=g.email&&d.email,v=g.password&&d.password;return o?a.a.createElement(s.a,{to:"/"}):a.a.createElement(r.Fragment,null,a.a.createElement(me,{component:"main",maxWidth:"xs"},a.a.createElement(q.a,null),a.a.createElement("div",{className:n.paper},a.a.createElement("form",{className:n.form,onSubmit:b,noValidate:!0},a.a.createElement("h1",null,"e4u hotels - Login"),a.a.createElement(B.a,{container:!0,spacing:2},a.a.createElement(B.a,{item:!0,xs:12},a.a.createElement(L.a,{value:m.email,onChange:f,onBlur:p,label:"Email",error:Boolean(h),helperText:h,variant:"outlined",name:"email",fullWidth:!0})),a.a.createElement(B.a,{item:!0,xs:12},a.a.createElement(L.a,{value:m.password,onChange:f,onBlur:p,error:Boolean(v),helperText:v,name:"password",label:"Password",type:"password",variant:"outlined",fullWidth:!0}))),a.a.createElement(oe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",loadingInProgress:c,className:n.submit},"Sign in"),a.a.createElement(B.a,{container:!0,justify:"flex-end"},a.a.createElement(B.a,{item:!0},a.a.createElement(T.a,{href:"/signup",variant:"body2"},"Don't have an account?")))))))},fe=t(190);function pe(){var e=Object(I.a)(["\n  text-align: center;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return pe=function(){return e},e}var be=l.c.div(pe());var he=[{path:"/signup",component:se,exact:!0,requireAuth:!1},{path:"/login",component:ge,exact:!0,requireAuth:!1},{component:function(){return a.a.createElement(be,null,a.a.createElement(fe.a,{variant:"h3"},404),a.a.createElement(fe.a,{variant:"h6"},"Page not found."))}}];function ve(){var e=Object(I.a)(['\nhtml,\nbody {\n  font: 400 0.875rem "Roboto", "Helvetica", "Arial", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  margin: 0;\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n\n#root {\n  background-color: #fff;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  & > div {\n    display: flex;\n    flex-grow: 1;\n  }\n}\n']);return ve=function(){return e},e}var je=Object(l.b)(ve());var Oe=function(e){return a.a.createElement(je,e)},Ee={primaryColor:"#ffffff",buttonColor:"#2e4a6b"},ye=Object(m.a)({overrides:{MuiOutlinedInput:{root:{backgroundColor:Ee.primaryColor,borderColor:Ee.buttonColor}}}});var we=function(){var e=Object(u.c)((function(e){return e.auth.userLoggedIn}));return a.a.createElement(d.b,{injectFirst:!0},a.a.createElement(Oe,null),a.a.createElement(g.a,{theme:ye},a.a.createElement(l.a,{theme:Ee},a.a.createElement(s.d,null,he.map((function(n,t){return n.requireAuth?a.a.createElement(S,Object.assign({key:t},n,{userLoggedIn:e})):a.a.createElement(s.b,Object.assign({key:t},n))}))),a.a.createElement(w,null))))},xe=t(41),ke=t(138),Se=t(144),Ie=t(43),Pe=t.n(Ie),Ce=t(30),qe=t(139),Le=t.n(qe),Te=t(140),Be=t.n(Te).a.create({baseURL:window.location.origin+":3000"});Be.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Be.interceptors.request.use((function(e){var n=_e.getState(),t=n&&n.auth&&n.auth.token;return t&&(e.headers.authorization="Bearer ".concat(t)),e}),(function(e){Promise.reject(e)}));var ze=Be,We=function(e){return ze({method:"POST",url:"/login",data:e})},Qe=function(e){return ze({method:"POST",url:"/register",data:e})},De=Pe.a.mark(Fe),Ne=Pe.a.mark(He),Ae=Pe.a.mark(Me);function Fe(e){var n,t,r,a,o,c,i,u,s;return Pe.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.email,t=e.password,r=e.history,l.prev=1,l.next=4,Object(Ce.c)(R(!0));case 4:return l.next=6,Object(Ce.b)(We,{email:n,password:t});case 6:return a=l.sent,o=a.data,c=o,i=Le()(c),u=i.type,s=i.id,D.setCookie("token",c),l.next=13,Object(Ce.c)(J({user:{type:u,id:s},token:c}));case 13:r.push("/"),l.next=21;break;case 16:return l.prev=16,l.t0=l.catch(1),console.log(l.t0),l.next=21,Object(Ce.c)(E("Error logging in.",j));case 21:return l.prev=21,l.next=24,Object(Ce.c)(R(!1));case 24:return l.finish(21);case 25:case"end":return l.stop()}}),De,null,[[1,16,21,25]])}function He(e){var n,t,r;return Pe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.data,t=e.history,a.prev=1,a.next=4,Object(Ce.c)(U(!0));case 4:return r={name:"".concat(n.name," ").concat(n.surname),email:n.email,password:n.password},a.next=7,Object(Ce.b)(Qe,r);case 7:return a.next=9,Object(Ce.c)(E("Successfully created an account.",O));case 9:t.push("/login"),a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(Ce.c)(E("Error creating account.",j));case 16:return a.prev=16,a.next=19,Object(Ce.c)(U(!1));case 19:return a.finish(16);case 20:case"end":return a.stop()}}),Ne,null,[[1,12,16,20]])}function Me(){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.d)(N,Fe);case 2:return e.next=4,Object(Ce.d)(H,He);case 4:case"end":return e.stop()}}),Ae)}var Ve=Pe.a.mark(Re);function Re(){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.a)([Me()]);case 2:case"end":return e.stop()}}),Ve)}var Je=t(27),Ue=function(){var e=D.getCookie("token");return{userLoggedIn:!!e,loginInProgress:!1,signupInProgress:!1,token:e,user:{id:null,type:null}}},Ge=t(114),Ke=t(143),Xe={messageQueue:[],messageShown:!1,message:{}},Ye=Object(xe.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case A:return Object(Je.a)(Object(Je.a)({},e),{},{loginInProgress:n.status});case F:var t=n.data,r=t.user,a=t.token;return Object(Je.a)(Object(Je.a)({},e),{},{user:r,token:a,userLoggedIn:!0});case M:return Object(Je.a)(Object(Je.a)({},e),{},{signupInProgress:n.status});case V:return Ue();default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:var t=Object(Ke.a)(e.messageQueue);if(t.push({message:n.message,severity:n.severity,key:(new Date).getTime()}),e.messageShown)return Object(Je.a)(Object(Je.a)({},e),{},{messageShown:!1,messageQueue:t});if(t.length>0){var r=Object(Ge.a)(t),a=r[0],o=r.slice(1);return Object(Je.a)(Object(Je.a)({},e),{},{messageShown:!0,message:a,messageQueue:o})}return e;case h:return Object(Je.a)(Object(Je.a)({},e),{},{messageShown:!1,message:{}});case v:if(e.messageQueue.length>0){var c=Object(Ge.a)(e.messageQueue),i=c[0],u=c.slice(1);return Object(Je.a)(Object(Je.a)({},e),{},{messageShown:!0,message:i,messageQueue:u})}return e;default:return e}}}),Ze=Object(Se.a)(),$e=Object(xe.createStore)((function(e,n){return Ye(e,n)}),{},Object(ke.composeWithDevTools)(Object(xe.applyMiddleware)(Ze)));Ze.run(Re);var _e=$e,en=document.getElementById("root");c.a.render(a.a.createElement(u.a,{store:_e},a.a.createElement(i.a,null,a.a.createElement(we,null))),en)}},[[159,1,2]]]);
//# sourceMappingURL=main.47b3fee2.chunk.js.map